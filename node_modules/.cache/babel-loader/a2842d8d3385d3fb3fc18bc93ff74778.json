{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ishik\\\\VS code\\\\Form\\\\dynamic-form-builder\\\\src\\\\components\\\\PreviewForm.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useCallback, useMemo } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { Box, TextField, Typography, Checkbox, FormControlLabel, Select, MenuItem, RadioGroup, Radio, FormHelperText, Button, Alert } from '@mui/material';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PreviewForm = () => {\n  _s();\n  const [schema, setSchema] = useState(null);\n  const [values, setValues] = useState({});\n  const [errors, setErrors] = useState({});\n  const [submitted, setSubmitted] = useState(false);\n  const [result, setResult] = useState(null);\n  const {\n    formId\n  } = useParams();\n  useEffect(() => {\n    if (!formId) return;\n    const stored = localStorage.getItem(formId);\n    if (stored) {\n      const parsed = JSON.parse(stored);\n      setSchema(parsed);\n      const defaults = {};\n      parsed.fields.forEach(f => {\n        if (!f.derived) {\n          defaults[f.id] = f.defaultValue || (f.type === 'checkbox' ? [] : '');\n        }\n      });\n      setValues(defaults);\n    }\n  }, [formId]);\n  const derivedFieldDeps = useMemo(() => {\n    if (!schema) return {};\n    const deps = {};\n    schema.fields.forEach(field => {\n      if (field.derived && field.parentFields) {\n        deps[field.id] = field.parentFields;\n      }\n    });\n    return deps;\n  }, [schema]);\n  const evalFormula = useCallback((formula, context) => {\n    try {\n      const safeContext = {\n        ...context\n      };\n      const helpers = {\n        new: constructor => constructor,\n        Date: Date,\n        Math: Math,\n        parseInt: parseInt,\n        parseFloat: parseFloat,\n        calculateAge: birthDate => {\n          console.log(`Calculated age for ${birthDate}`);\n          if (!birthDate) return 0;\n          const today = new Date();\n          const birth = new Date(birthDate);\n          if (isNaN(birth.getTime())) return 0;\n          let age = today.getFullYear() - birth.getFullYear();\n          const monthDiff = today.getMonth() - birth.getMonth();\n          if (monthDiff < 0 || monthDiff === 0 && today.getDate() < birth.getDate()) {\n            age--;\n          }\n          return age;\n        }\n      };\n      const evalContext = {\n        ...safeContext,\n        ...helpers\n      };\n      const params = Object.keys(evalContext);\n      const values = Object.values(evalContext);\n      const func = new Function(...params, `\"use strict\"; return (${formula});`);\n      return func(...values);\n    } catch (error) {\n      console.error('Formula evaluation error:', error, 'Formula:', formula, 'Context:', context);\n      return 'Error';\n    }\n  }, []);\n  useEffect(() => {\n    if (!schema || Object.keys(values).length === 0) return;\n    const newValues = {\n      ...values\n    };\n    let hasChanges = false;\n    schema.fields.forEach(field => {\n      if (field.derived && field.parentFields && field.formula) {\n        const context = {};\n        let hasAllParents = true;\n        field.parentFields.forEach(parentId => {\n          if (parentId in values) {\n            context[parentId] = values[parentId];\n          } else {\n            hasAllParents = false;\n          }\n        });\n        if (hasAllParents) {\n          const computedValue = evalFormula(field.formula, context);\n          if (newValues[field.id] !== computedValue) {\n            newValues[field.id] = computedValue;\n            hasChanges = true;\n          }\n        } else if (field.id in newValues) {\n          delete newValues[field.id];\n          hasChanges = true;\n        }\n      }\n    });\n    if (hasChanges) {\n      setValues(newValues);\n    }\n  }, [schema, values, evalFormula]);\n  const validateField = useCallback((field, value) => {\n    const {\n      validation\n    } = field;\n    if (validation.required && (!value || Array.isArray(value) && value.length === 0)) {\n      return 'This field is required.';\n    }\n    if (typeof value === 'string') {\n      if (validation.minLength && value.length < validation.minLength) {\n        return `Minimum length is ${validation.minLength}`;\n      }\n      if (validation.maxLength && value.length > validation.maxLength) {\n        return `Maximum length is ${validation.maxLength}`;\n      }\n      if (validation.email && value && !/^\\S+@\\S+\\.\\S+$/.test(value)) {\n        return 'Invalid email format.';\n      }\n      if (validation.password && value && (!/^.{8,}$/.test(value) || !/\\d/.test(value))) {\n        return 'Password must be at least 8 characters and contain a number.';\n      }\n    }\n    return '';\n  }, []);\n  const handleChange = useCallback((id, value) => {\n    setValues(prev => ({\n      ...prev,\n      [id]: value\n    }));\n    const field = schema === null || schema === void 0 ? void 0 : schema.fields.find(f => f.id === id);\n    if (field && !field.derived) {\n      const err = validateField(field, value);\n      setErrors(prev => ({\n        ...prev,\n        [id]: err\n      }));\n    }\n  }, [schema, validateField]);\n  const handleSubmit = e => {\n    e.preventDefault();\n    setSubmitted(true);\n    const newErrors = {};\n    schema === null || schema === void 0 ? void 0 : schema.fields.forEach(field => {\n      if (!field.derived) {\n        const err = validateField(field, values[field.id]);\n        if (err) newErrors[field.id] = err;\n      }\n    });\n    setErrors(newErrors);\n    let correct = true;\n    let feedback = '';\n    schema === null || schema === void 0 ? void 0 : schema.fields.forEach(field => {\n      const fieldValue = values[field.id];\n      if ((field.type === 'radio' || field.type === 'select') && field.validation.correctAnswer) {\n        if (fieldValue !== field.validation.correctAnswer) {\n          correct = false;\n          feedback += `${field.label}: Incorrect answer.\\n`;\n        }\n      }\n      if (field.type === 'checkbox' && Array.isArray(field.validation.correctAnswers)) {\n        const userAnswers = Array.isArray(fieldValue) ? fieldValue : [];\n        const correctAnswers = field.validation.correctAnswers;\n        if (userAnswers.length !== correctAnswers.length || !correctAnswers.every(ans => userAnswers.includes(ans))) {\n          correct = false;\n          feedback += `${field.label}: Incorrect answer.\\n`;\n        }\n      }\n    });\n    setResult(correct ? 'All answers are correct!' : feedback || 'Some answers are incorrect.');\n    if (Object.keys(newErrors).length === 0) {\n      alert('Form submitted successfully (check console for values)!');\n    }\n  };\n  if (!schema) {\n    return /*#__PURE__*/_jsxDEV(Typography, {\n      children: \"Loading form...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 16\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Box, {\n    p: 4,\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h4\",\n      gutterBottom: true,\n      children: [\"Preview: \", schema.name]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      component: \"form\",\n      display: \"flex\",\n      flexDirection: \"column\",\n      gap: 3,\n      onSubmit: handleSubmit,\n      children: [schema.fields.map(field => {\n        var _values$field$id, _errors$field$id, _field$options, _field$options2, _field$options3;\n        const value = (_values$field$id = values[field.id]) !== null && _values$field$id !== void 0 ? _values$field$id : field.type === 'checkbox' ? [] : '';\n        const error = (_errors$field$id = errors[field.id]) !== null && _errors$field$id !== void 0 ? _errors$field$id : '';\n        const isDisabled = field.derived || false;\n        switch (field.type) {\n          case 'text':\n          case 'number':\n          case 'date':\n            return /*#__PURE__*/_jsxDEV(TextField, {\n              type: field.type,\n              label: `${field.label}${isDisabled ? ' (Auto-calculated)' : ''}`,\n              value: value,\n              onChange: e => handleChange(field.id, e.target.value),\n              error: !!error,\n              helperText: error || (isDisabled ? 'This field is automatically calculated' : ''),\n              disabled: isDisabled,\n              sx: isDisabled ? {\n                '& .MuiInputBase-input': {\n                  color: 'text.secondary'\n                }\n              } : {}\n            }, field.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 266,\n              columnNumber: 33\n            }, this);\n          case 'textarea':\n            return /*#__PURE__*/_jsxDEV(TextField, {\n              label: `${field.label}${isDisabled ? ' (Auto-calculated)' : ''}`,\n              value: value,\n              onChange: e => handleChange(field.id, e.target.value),\n              error: !!error,\n              helperText: error || (isDisabled ? 'This field is automatically calculated' : ''),\n              multiline: true,\n              rows: 3,\n              disabled: isDisabled,\n              sx: isDisabled ? {\n                '& .MuiInputBase-input': {\n                  color: 'text.secondary'\n                }\n              } : {}\n            }, field.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 281,\n              columnNumber: 33\n            }, this);\n          case 'select':\n            return /*#__PURE__*/_jsxDEV(Box, {\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                children: [field.label, isDisabled ? ' (Auto-calculated)' : '']\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 298,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(Select, {\n                fullWidth: true,\n                value: value,\n                onChange: e => handleChange(field.id, e.target.value),\n                disabled: isDisabled,\n                sx: isDisabled ? {\n                  color: 'text.secondary'\n                } : {},\n                children: (_field$options = field.options) === null || _field$options === void 0 ? void 0 : _field$options.map((opt, i) => /*#__PURE__*/_jsxDEV(MenuItem, {\n                  value: opt,\n                  children: opt\n                }, i, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 309,\n                  columnNumber: 45\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 301,\n                columnNumber: 37\n              }, this), error && /*#__PURE__*/_jsxDEV(FormHelperText, {\n                error: true,\n                children: error\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 314,\n                columnNumber: 47\n              }, this), isDisabled && /*#__PURE__*/_jsxDEV(FormHelperText, {\n                children: \"This field is automatically calculated\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 315,\n                columnNumber: 52\n              }, this)]\n            }, field.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 297,\n              columnNumber: 33\n            }, this);\n          case 'radio':\n            return /*#__PURE__*/_jsxDEV(Box, {\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                children: [field.label, isDisabled ? ' (Auto-calculated)' : '']\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 322,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(RadioGroup, {\n                value: value,\n                onChange: e => handleChange(field.id, e.target.value),\n                children: (_field$options2 = field.options) === null || _field$options2 === void 0 ? void 0 : _field$options2.map((opt, i) => /*#__PURE__*/_jsxDEV(FormControlLabel, {\n                  value: opt,\n                  control: /*#__PURE__*/_jsxDEV(Radio, {\n                    disabled: isDisabled\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 333,\n                    columnNumber: 58\n                  }, this),\n                  label: opt,\n                  sx: isDisabled ? {\n                    color: 'text.secondary'\n                  } : {}\n                }, i, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 330,\n                  columnNumber: 45\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 325,\n                columnNumber: 37\n              }, this), error && /*#__PURE__*/_jsxDEV(FormHelperText, {\n                error: true,\n                children: error\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 339,\n                columnNumber: 47\n              }, this), isDisabled && /*#__PURE__*/_jsxDEV(FormHelperText, {\n                children: \"This field is automatically calculated\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 340,\n                columnNumber: 52\n              }, this)]\n            }, field.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 321,\n              columnNumber: 33\n            }, this);\n          case 'checkbox':\n            return /*#__PURE__*/_jsxDEV(Box, {\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                children: [field.label, isDisabled ? ' (Auto-calculated)' : '']\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 347,\n                columnNumber: 37\n              }, this), (_field$options3 = field.options) === null || _field$options3 === void 0 ? void 0 : _field$options3.map((opt, i) => /*#__PURE__*/_jsxDEV(FormControlLabel, {\n                control: /*#__PURE__*/_jsxDEV(Checkbox, {\n                  checked: Array.isArray(value) && value.includes(opt),\n                  onChange: e => {\n                    if (!isDisabled) {\n                      const checked = e.target.checked;\n                      const currentValue = Array.isArray(value) ? value : [];\n                      const newValue = checked ? [...currentValue, opt] : currentValue.filter(v => v !== opt);\n                      handleChange(field.id, newValue);\n                    }\n                  },\n                  disabled: isDisabled\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 354,\n                  columnNumber: 49\n                }, this),\n                label: opt,\n                sx: isDisabled ? {\n                  color: 'text.secondary'\n                } : {}\n              }, i, false, {\n                fileName: _jsxFileName,\n                lineNumber: 351,\n                columnNumber: 41\n              }, this)), error && /*#__PURE__*/_jsxDEV(FormHelperText, {\n                error: true,\n                children: error\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 373,\n                columnNumber: 47\n              }, this), isDisabled && /*#__PURE__*/_jsxDEV(FormHelperText, {\n                children: \"This field is automatically calculated\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 374,\n                columnNumber: 52\n              }, this)]\n            }, field.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 346,\n              columnNumber: 33\n            }, this);\n          default:\n            return null;\n        }\n      }), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"contained\",\n        type: \"submit\",\n        size: \"large\",\n        children: \"Submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 383,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 13\n    }, this), submitted && result && /*#__PURE__*/_jsxDEV(Box, {\n      mt: 2,\n      children: /*#__PURE__*/_jsxDEV(Alert, {\n        severity: result === 'All answers are correct!' ? 'success' : 'error',\n        children: result\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 389,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 250,\n    columnNumber: 9\n  }, this);\n};\n_s(PreviewForm, \"Yqh8RGLCnBJ1DsH+fGbIm6HhtgA=\", false, function () {\n  return [useParams];\n});\n_c = PreviewForm;\nexport default PreviewForm;\nvar _c;\n$RefreshReg$(_c, \"PreviewForm\");","map":{"version":3,"names":["React","useEffect","useState","useCallback","useMemo","useParams","Box","TextField","Typography","Checkbox","FormControlLabel","Select","MenuItem","RadioGroup","Radio","FormHelperText","Button","Alert","jsxDEV","_jsxDEV","PreviewForm","_s","schema","setSchema","values","setValues","errors","setErrors","submitted","setSubmitted","result","setResult","formId","stored","localStorage","getItem","parsed","JSON","parse","defaults","fields","forEach","f","derived","id","defaultValue","type","derivedFieldDeps","deps","field","parentFields","evalFormula","formula","context","safeContext","helpers","new","constructor","Date","Math","parseInt","parseFloat","calculateAge","birthDate","console","log","today","birth","isNaN","getTime","age","getFullYear","monthDiff","getMonth","getDate","evalContext","params","Object","keys","func","Function","error","length","newValues","hasChanges","hasAllParents","parentId","computedValue","validateField","value","validation","required","Array","isArray","minLength","maxLength","email","test","password","handleChange","prev","find","err","handleSubmit","e","preventDefault","newErrors","correct","feedback","fieldValue","correctAnswer","label","correctAnswers","userAnswers","every","ans","includes","alert","children","fileName","_jsxFileName","lineNumber","columnNumber","p","variant","gutterBottom","name","component","display","flexDirection","gap","onSubmit","map","_values$field$id","_errors$field$id","_field$options","_field$options2","_field$options3","isDisabled","onChange","target","helperText","disabled","sx","color","multiline","rows","fullWidth","options","opt","i","control","checked","currentValue","newValue","filter","v","size","mt","severity","_c","$RefreshReg$"],"sources":["C:/Users/ishik/VS code/Form/dynamic-form-builder/src/components/PreviewForm.tsx"],"sourcesContent":["import React, { useEffect, useState, useCallback, useMemo } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport {\r\n    Box,\r\n    TextField,\r\n    Typography,\r\n    Checkbox,\r\n    FormControlLabel,\r\n    Select,\r\n    MenuItem,\r\n    RadioGroup,\r\n    Radio,\r\n    FormHelperText,\r\n    Button,\r\n    Alert,\r\n} from '@mui/material';\r\n\r\ninterface Validation {\r\n    required: boolean;\r\n    minLength?: number;\r\n    maxLength?: number;\r\n    email?: boolean;\r\n    password?: boolean;\r\n    correctAnswers?: string[];\r\n    correctAnswer?: string;\r\n}\r\n\r\ninterface Field {\r\n    derived?: boolean;\r\n    parentFields?: string[];\r\n    formula?: string;\r\n    id: string;\r\n    type: string;\r\n    label: string;\r\n    defaultValue?: string;\r\n    options?: string[];\r\n    validation: Validation;\r\n}\r\n\r\ninterface FormSchema {\r\n    name: string;\r\n    fields: Field[];\r\n}\r\n\r\nconst PreviewForm: React.FC = () => {\r\n    const [schema, setSchema] = useState<FormSchema | null>(null);\r\n    const [values, setValues] = useState<Record<string, any>>({});\r\n    const [errors, setErrors] = useState<Record<string, string>>({});\r\n    const [submitted, setSubmitted] = useState(false);\r\n    const [result, setResult] = useState<string | null>(null);\r\n\r\n    const { formId } = useParams<{ formId: string }>();\r\n\r\n    useEffect(() => {\r\n        if (!formId) return;\r\n\r\n        const stored = localStorage.getItem(formId);\r\n        if (stored) {\r\n            const parsed = JSON.parse(stored) as FormSchema;\r\n            setSchema(parsed);\r\n\r\n            const defaults: Record<string, any> = {};\r\n            parsed.fields.forEach((f) => {\r\n                if (!f.derived) {\r\n                    defaults[f.id] = f.defaultValue || (f.type === 'checkbox' ? [] : '');\r\n                }\r\n            });\r\n            setValues(defaults);\r\n        }\r\n    }, [formId]);\r\n\r\n    const derivedFieldDeps = useMemo(() => {\r\n        if (!schema) return {};\r\n        \r\n        const deps: Record<string, string[]> = {};\r\n        schema.fields.forEach(field => {\r\n            if (field.derived && field.parentFields) {\r\n                deps[field.id] = field.parentFields;\r\n            }\r\n        });\r\n        return deps;\r\n    }, [schema]);\r\n\r\n    const evalFormula = useCallback((formula: string, context: Record<string, any>) => {\r\n        try {\r\n            const safeContext = { ...context };\r\n            \r\n            const helpers = {\r\n                new: (constructor: any) => constructor,\r\n                Date: Date,\r\n                Math: Math,\r\n                parseInt: parseInt,\r\n                parseFloat: parseFloat,\r\n                calculateAge: (birthDate: string) => {\r\n                    console.log(`Calculated age for ${birthDate}`);\r\n                    if (!birthDate) return 0;\r\n                    const today = new Date();\r\n                    const birth = new Date(birthDate);\r\n                    if (isNaN(birth.getTime())) return 0;\r\n                    \r\n                    let age = today.getFullYear() - birth.getFullYear();\r\n                    const monthDiff = today.getMonth() - birth.getMonth();\r\n                    \r\n                    if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birth.getDate())) {\r\n                        age--;\r\n                    }\r\n                    return age;\r\n                }\r\n            };\r\n\r\n            const evalContext = { ...safeContext, ...helpers };\r\n            \r\n            const params = Object.keys(evalContext);\r\n            const values = Object.values(evalContext);\r\n            \r\n            const func = new Function(...params, `\"use strict\"; return (${formula});`);\r\n            return func(...values);\r\n        } catch (error) {\r\n            console.error('Formula evaluation error:', error, 'Formula:', formula, 'Context:', context);\r\n            return 'Error';\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (!schema || Object.keys(values).length === 0) return;\r\n\r\n        const newValues = { ...values };\r\n        let hasChanges = false;\r\n\r\n        schema.fields.forEach(field => {\r\n            if (field.derived && field.parentFields && field.formula) {\r\n                const context: Record<string, any> = {};\r\n                let hasAllParents = true;\r\n\r\n                field.parentFields.forEach(parentId => {\r\n                    if (parentId in values) {\r\n                        context[parentId] = values[parentId];\r\n                    } else {\r\n                        hasAllParents = false;\r\n                    }\r\n                });\r\n\r\n                if (hasAllParents) {\r\n                    const computedValue = evalFormula(field.formula, context);\r\n                    \r\n                    if (newValues[field.id] !== computedValue) {\r\n                        newValues[field.id] = computedValue;\r\n                        hasChanges = true;\r\n                    }\r\n                } else if (field.id in newValues) {\r\n                    delete newValues[field.id];\r\n                    hasChanges = true;\r\n                }\r\n            }\r\n        });\r\n\r\n        if (hasChanges) {\r\n            setValues(newValues);\r\n        }\r\n    }, [schema, values, evalFormula]);\r\n\r\n    const validateField = useCallback((field: Field, value: any): string => {\r\n        const { validation } = field;\r\n        \r\n        if (validation.required && (!value || (Array.isArray(value) && value.length === 0))) {\r\n            return 'This field is required.';\r\n        }\r\n        \r\n        if (typeof value === 'string') {\r\n            if (validation.minLength && value.length < validation.minLength) {\r\n                return `Minimum length is ${validation.minLength}`;\r\n            }\r\n            if (validation.maxLength && value.length > validation.maxLength) {\r\n                return `Maximum length is ${validation.maxLength}`;\r\n            }\r\n            if (validation.email && value && !/^\\S+@\\S+\\.\\S+$/.test(value)) {\r\n                return 'Invalid email format.';\r\n            }\r\n            if (validation.password && value && \r\n                (!/^.{8,}$/.test(value) || !/\\d/.test(value))) {\r\n                return 'Password must be at least 8 characters and contain a number.';\r\n            }\r\n        }\r\n        \r\n        return '';\r\n    }, []);\r\n\r\n    const handleChange = useCallback((id: string, value: any) => {\r\n        setValues(prev => ({ ...prev, [id]: value }));\r\n        \r\n        const field = schema?.fields.find(f => f.id === id);\r\n        if (field && !field.derived) {\r\n            const err = validateField(field, value);\r\n            setErrors(prev => ({ ...prev, [id]: err }));\r\n        }\r\n    }, [schema, validateField]);\r\n\r\n    const handleSubmit = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setSubmitted(true);\r\n\r\n        const newErrors: Record<string, string> = {};\r\n        \r\n        schema?.fields.forEach(field => {\r\n            if (!field.derived) {\r\n                const err = validateField(field, values[field.id]);\r\n                if (err) newErrors[field.id] = err;\r\n            }\r\n        });\r\n\r\n        setErrors(newErrors);\r\n\r\n        let correct = true;\r\n        let feedback = '';\r\n        \r\n        schema?.fields.forEach(field => {\r\n            const fieldValue = values[field.id];\r\n            \r\n            if ((field.type === 'radio' || field.type === 'select') && field.validation.correctAnswer) {\r\n                if (fieldValue !== field.validation.correctAnswer) {\r\n                    correct = false;\r\n                    feedback += `${field.label}: Incorrect answer.\\n`;\r\n                }\r\n            }\r\n            \r\n            if (field.type === 'checkbox' && Array.isArray(field.validation.correctAnswers)) {\r\n                const userAnswers = Array.isArray(fieldValue) ? fieldValue : [];\r\n                const correctAnswers = field.validation.correctAnswers;\r\n                \r\n                if (userAnswers.length !== correctAnswers.length ||\r\n                    !correctAnswers.every(ans => userAnswers.includes(ans))) {\r\n                    correct = false;\r\n                    feedback += `${field.label}: Incorrect answer.\\n`;\r\n                }\r\n            }\r\n        });\r\n\r\n        setResult(correct ? 'All answers are correct!' : feedback || 'Some answers are incorrect.');\r\n\r\n        if (Object.keys(newErrors).length === 0) {\r\n            alert('Form submitted successfully (check console for values)!');\r\n        }\r\n    };\r\n\r\n    if (!schema) {\r\n        return <Typography>Loading form...</Typography>;\r\n    }\r\n\r\n    return (\r\n        <Box p={4}>\r\n            <Typography variant=\"h4\" gutterBottom>\r\n                Preview: {schema.name}\r\n            </Typography>\r\n\r\n            <Box component=\"form\" display=\"flex\" flexDirection=\"column\" gap={3} onSubmit={handleSubmit}>\r\n                {schema.fields.map(field => {\r\n                    const value = values[field.id] ?? (field.type === 'checkbox' ? [] : '');\r\n                    const error = errors[field.id] ?? '';\r\n                    const isDisabled = field.derived || false;\r\n\r\n                    switch (field.type) {\r\n                        case 'text':\r\n                        case 'number':\r\n                        case 'date':\r\n                            return (\r\n                                <TextField\r\n                                    key={field.id}\r\n                                    type={field.type}\r\n                                    label={`${field.label}${isDisabled ? ' (Auto-calculated)' : ''}`}\r\n                                    value={value}\r\n                                    onChange={(e) => handleChange(field.id, e.target.value)}\r\n                                    error={!!error}\r\n                                    helperText={error || (isDisabled ? 'This field is automatically calculated' : '')}\r\n                                    disabled={isDisabled}\r\n                                    sx={isDisabled ? { '& .MuiInputBase-input': { color: 'text.secondary' } } : {}}\r\n                                />\r\n                            );\r\n\r\n                        case 'textarea':\r\n                            return (\r\n                                <TextField\r\n                                    key={field.id}\r\n                                    label={`${field.label}${isDisabled ? ' (Auto-calculated)' : ''}`}\r\n                                    value={value}\r\n                                    onChange={(e) => handleChange(field.id, e.target.value)}\r\n                                    error={!!error}\r\n                                    helperText={error || (isDisabled ? 'This field is automatically calculated' : '')}\r\n                                    multiline\r\n                                    rows={3}\r\n                                    disabled={isDisabled}\r\n                                    sx={isDisabled ? { '& .MuiInputBase-input': { color: 'text.secondary' } } : {}}\r\n                                />\r\n                            );\r\n\r\n                        case 'select':\r\n                            return (\r\n                                <Box key={field.id}>\r\n                                    <Typography>\r\n                                        {field.label}{isDisabled ? ' (Auto-calculated)' : ''}\r\n                                    </Typography>\r\n                                    <Select\r\n                                        fullWidth\r\n                                        value={value}\r\n                                        onChange={(e) => handleChange(field.id, e.target.value)}\r\n                                        disabled={isDisabled}\r\n                                        sx={isDisabled ? { color: 'text.secondary' } : {}}\r\n                                    >\r\n                                        {field.options?.map((opt, i) => (\r\n                                            <MenuItem key={i} value={opt}>\r\n                                                {opt}\r\n                                            </MenuItem>\r\n                                        ))}\r\n                                    </Select>\r\n                                    {error && <FormHelperText error>{error}</FormHelperText>}\r\n                                    {isDisabled && <FormHelperText>This field is automatically calculated</FormHelperText>}\r\n                                </Box>\r\n                            );\r\n\r\n                        case 'radio':\r\n                            return (\r\n                                <Box key={field.id}>\r\n                                    <Typography>\r\n                                        {field.label}{isDisabled ? ' (Auto-calculated)' : ''}\r\n                                    </Typography>\r\n                                    <RadioGroup\r\n                                        value={value}\r\n                                        onChange={(e) => handleChange(field.id, e.target.value)}\r\n                                    >\r\n                                        {field.options?.map((opt, i) => (\r\n                                            <FormControlLabel \r\n                                                key={i} \r\n                                                value={opt} \r\n                                                control={<Radio disabled={isDisabled} />} \r\n                                                label={opt}\r\n                                                sx={isDisabled ? { color: 'text.secondary' } : {}}\r\n                                            />\r\n                                        ))}\r\n                                    </RadioGroup>\r\n                                    {error && <FormHelperText error>{error}</FormHelperText>}\r\n                                    {isDisabled && <FormHelperText>This field is automatically calculated</FormHelperText>}\r\n                                </Box>\r\n                            );\r\n\r\n                        case 'checkbox':\r\n                            return (\r\n                                <Box key={field.id}>\r\n                                    <Typography>\r\n                                        {field.label}{isDisabled ? ' (Auto-calculated)' : ''}\r\n                                    </Typography>\r\n                                    {field.options?.map((opt, i) => (\r\n                                        <FormControlLabel\r\n                                            key={i}\r\n                                            control={\r\n                                                <Checkbox\r\n                                                    checked={Array.isArray(value) && value.includes(opt)}\r\n                                                    onChange={(e) => {\r\n                                                        if (!isDisabled) {\r\n                                                            const checked = e.target.checked;\r\n                                                            const currentValue = Array.isArray(value) ? value : [];\r\n                                                            const newValue = checked\r\n                                                                ? [...currentValue, opt]\r\n                                                                : currentValue.filter(v => v !== opt);\r\n                                                            handleChange(field.id, newValue);\r\n                                                        }\r\n                                                    }}\r\n                                                    disabled={isDisabled}\r\n                                                />\r\n                                            }\r\n                                            label={opt}\r\n                                            sx={isDisabled ? { color: 'text.secondary' } : {}}\r\n                                        />\r\n                                    ))}\r\n                                    {error && <FormHelperText error>{error}</FormHelperText>}\r\n                                    {isDisabled && <FormHelperText>This field is automatically calculated</FormHelperText>}\r\n                                </Box>\r\n                            );\r\n\r\n                        default:\r\n                            return null;\r\n                    }\r\n                })}\r\n\r\n                <Button variant=\"contained\" type=\"submit\" size=\"large\">\r\n                    Submit\r\n                </Button>\r\n            </Box>\r\n            \r\n            {submitted && result && (\r\n                <Box mt={2}>\r\n                    <Alert severity={result === 'All answers are correct!' ? 'success' : 'error'}>\r\n                        {result}\r\n                    </Alert>\r\n                </Box>\r\n            )}\r\n        </Box>\r\n    );\r\n};\r\n\r\nexport default PreviewForm;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}